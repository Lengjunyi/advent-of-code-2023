s = """...................................................................................................................................
........#..#..#..........#..........#.........#.......................#....#....##....#.......#.....#.#.....##..........#..#.......
................#.....#.#...#.##.......#...........#...#.#.......................#....#...#...#....#...............#.........#.....
.............#................##.#........#.#.......................................#.#............##................#.....#.......
.................#......................#.#....#.........................#.#...........#...........#.................#....##.#.....
.......#................#...#.....#.......#...##.................................#............#....#..#.......##...#...##........#.
.......#...........#....#..#......................#...............................#......#.......#..#....#.......................#.
.........#.....#..#....##...........##.....#..#.....................................#............#..........................#......
..............#..........#.......##..........#......#.................................#......................###.#.............#...
.......................#...............##...#..##............#......................#.......#......................##..............
..##......#...#..##..#..##...#...#..............#..................#............#.....#.........#.....#..##......#...#.............
..#.#.........#.......#.#...#.....#....#...#...#..........##..#....#.#..#...........#.........................#....................
.....#....#..........#....#.......#......#.......#..........#.#....#.................#....#....#.........................#.........
..#...........#.#.....###.......#............#.##......................#...............#.##...#...........................#........
............#.#....#.#.#.#.....#.....#....#..#...............#...........................#.....#......#....#..#................##..
..#........#....................###.........#...........#.#........##.................##...#..........#..........#.........#.......
........#........##..#........#.....#...#................##.....#.......................#......................#.............##....
...........#.....#...............#.......................##............................##...............#.....#....#.............#.
.............#........##..####..#......#...#................#..#................................#.........#........................
.##...#..............#....##...........#.......................#..........#............................#.......#.........#.#.......
........#.........................#...............#........#..................#...............#..........##.#.........#............
......#..#....#................#....#.......................#.............................#....##...........#......................
..#.....#.#.......#...#...........#.#................#.........##...............................#........#.#..................#....
...#..#......#..#................#..............................#...............#......................#...#.....#..#.....#........
...#....#.........##..............#.................#..#................##...........#.....................#.#.....#.........#...#.
..#..##.....#..........##..#...#.......................#.....#....#................#..#............#.#.............................
........#......#...#....#..........#.......#........#.#..#......#............#..#..............##................#..........##.....
.....#.........#..#..#........#............#.#........#.............#.....#...#.......#.......................................#..#.
......#......................................##............#............#...#....#...............#....#.....#..#.........#.......#.
....#.....#..............#....##............#......#.......#..##.......................................#........#..#...............
..........#....#.#.....##.#.................#..........#....#.............#....#........#..................#....#.....##....##.....
...........#...##....#.##...............##.....#..#..#...#..#..#...#............#....................#.........#.............#.....
.......#........##..........#...........................#...........................##..............................#....#.....#.#.
........###...#............................#...#...................##.#.#...........#..................#............#...#..........
..#.....#.#......#......#.#........##....#.............#....#...#....#......#........#..##.............#.#...#.........#.....#.....
...........##..............................#.##.......#.......#.........#.#.............................#...#......#..#...#...#....
........#....#......#.............#..#.#.##.#..#..#..#.......#....#......#.....#....#.....#......#.................................
..........#...........#.........##...#...............................##.............#......##....#...................#..#...#....#.
.............#...#.#.............#..#........#.................#.......#.............#...................................#.#.....#.
......#.#................................##.....###...........#........#....................#.....#.#....................#...##....
..##.........#.#.#.......................#............###....#.................#....#...........#..............#.#..#.#............
.......#.......................................#.....#......#...............#................#.................#...#.....#..#......
.............................#.....#.....#...........#.....#..#.....................##.............................................
....#......................................#.#.......................................#...............................#.............
............................................#....#..#..#.................##...#..#.........................................#...#...
.....#......................#................##.....................#......#....#...#........#........#......................#...#.
...##..........#......................#............##..........#....................................................#......#.#.....
............#................#...........##................................##....#.#...#.....#.....................................
.............#............#..................#.......#............#...##.#........#......#...#......#..................#.......#...
........#...............#...#......##...........#.....#..#......#......#........#.#...#.........#.........###.#.........##....#.#..
..........#..................#..##.......#.........##.......#......#.....#.....#.##.......#....#................................#..
.......#...........#...#......##.............#.......##....##.................#..#.............#....#........#..........#.#.....#..
........#...........#...#..............#....#.....#............#...#.....#...#............................#....#...................
.....####........#.....##........#.......#.........#..#.....#.....#..#.......#..#.......#........#.#...#.......#..........#...#..#.
......##.......#..#..#.#..................#.........#......#.....................#.......#.#..........#.........#..........##......
...................#......##...............#....#.......................#..#.......#..#..............#.............................
......................................#........#.........#..........#......#.#.....#...........#.................#...............#.
..................##...........##.#.#..#..##..............#........................#...............#......#...#....#...............
.............#....#..............................#.#..####....#....#..#..#.......................#.##......#..#.......#............
..................#.#.........#........#...#.....#........................#.............#..#................#...........#.......#..
............#...............#.......##.....##..................#...........#....#.....#........#.......................#...........
.........#....#.#...#.#...#........#.......#...#....#..............#.....#........#.#.#...........#...##....##.#..#................
................#.#...........#.........#..#...#.#.#..#......#.##............#....####..#..........##..#......#..#.................
......#...#......................#..#......#......#...............................................#...#..#....#.....#..............
........#.#.....#...........#...#........#...#..##..#....#.....##.................##.#......#....#.........#.....##.#...#..........
.................................................................S.................................................................
......................#....#......#.#..#......#....##...........#.....#...............#...#.......#........##......................
..............#............#...#..........#.........#......#.........#..............................#.....##.........#...#.........
..............#........#................#....#..............#.......#...................##..............#..#....#.#.....#..........
...........#........#.....#........................#......................###..............#......#.#....#.........................
.............#...#.....#.#..#..#....##....#...............#...#........................#.#..#......#..................##...........
.............#...#.................#.................#..#.............#.#....#......#.#..##.#......#...#..#........#.............#.
..............#.....#...................#.........#..#.........#....................#..............................#...............
.#.................#.#.#....#......##.#....................#...#......#........##..............#................#..................
..............#....#...........###...#.....#.......#.......................#.................#....#...#..............#.............
...............#...........................#.......#.....#..........#..............................................................
...............................................#...........##..#..........#..............#...#...........#......#.............##...
......#............#..##................#.............................................#..........#..........#.....#................
..................###........#..#.......#...#...........###.#.#...........................#................#...............#.#.....
...#.#..............#.....#...#....#............................#....#....#..........#..........#.##.#....#.................#....#.
.#...................#..........#......#...#.....#........#.....................#...........#..............................#.......
..#.#...#..#........#..#.....##..#......#.............#................#...#.........#......#...........#...................#......
..##...##.................#.....#............#..#.....#..#....#.....#....#.............#.............##......#........#......#..#..
....#...#..#..#.............#.....#...#...............#........#..#...#...#........#...............#.............................#.
...#...#.................#............#..#......#..................................#........#.......#.#............##.......##...#.
......#...................................#.#....#........#.......#..................#...................................#..#......
......#.##......#............#.#.......................#.....#....##..#................#...........#.................#.......##....
...#...#..#....#..............#................................#.......#.......#....#................#...........................#.
....#.#.........#......................#......##................#.......#....#....#.#......#..#...................#....#....#....#.
.......#........................#.....#................#..#.#..................................#....#..........##...#..#...........
.................#...........#................##.#......................#...#..#..#...#.....#.......#.............#..#..#.#........
......#..#...........#.................#....#.#............#...............#..#....#..#.......#......................#..#..#.#.....
...#.#.....#.......................#.......#...................##...............#....#.#..#.......#..............#....#.......#....
...............#....#............#................................##.........................................#.........#.....#..#..
..#...................##................#..........................#......#..####...............#.........#........#...#...........
....#..................#.#........#.....###..................#..........#.#.#...#.#...#........#..........#....##.#.............#..
..#.................................#.#....#.#.......#.##.................#........#..........................#....................
...#..#.....................#.......##.....................#.................#.........................#.........#..#.....#........
..#....#..............................#...#...#...............##..........#.................#........#..#.#.....#.#.......#........
..#............#....#........#...........#...........#.......................................................#................#..#.
.#...##...#.........#..........#...................#....#....#..#..............#.......................#..#......#.................
...#..#................#................#.........#.......#.........#.......#..............................#.....#.................
......................#..#....#..........#........#..##..............#..##...........#...........#............#.........#..........
.....#..................................................................................#.......#...#.#....................#.......
........#...#..#..............#.#.#...........#.#..#..........#....#.#...........................................#..#...##.........
..........#....#......##....#......................##..#.#...........#......#........................##.#.......#.#......#.........
....#................#...#.#...............................##..............#..............................#...#.##.........#...#...
..............#............#......##.......................................................................#.......#...............
....#...........#.#.#.............#...................#...........#.....................................#......#...................
...#........................#............................#..............#......................##....##.....#...#..#...#...........
....#...........#.....................................................#.....#.#...............#...............................#....
..........................#........#.#............#........#...#......#......#..#..............................#....#.....#........
.#........#............#...............................#..................#.#......................................##....#.........
.....#.#...#.##....#........#..........##.............#...#...................#...............#......#.#...........##....#.........
............#........#.................#.............##....#..............................#.....#..##..#......#............#.......
...............#...#.#...........##................................#.....................#..........#................#....#.#......
......##.......#..#..#.#.......#...#........#.............#........#...#....................................#....#......#..........
...........#.........#........#.#...........#............#.........................#.........#....#.....#......#.#.#...##..#.#...#.
.....#......#........#.......................#.............##....................#............................#..#..#...#.....#..#.
.#.#.#..........#............##.......#.....#.#...............#.....#..#..........#..#.#...#...#............#......#.#...#.........
.#..#......#.#..#...#....#.........#.....##.....##..........##......#................#....#.......#..#......#...........#......#...
.......#.....................#.#...........##......#...............................#.......#...................#...........##.#....
....#..................#............#...........#.....................................................#.................#...#......
....#..#..#................#.....#.....#.........#..........................#..#......#..........................................#.
...........#......#....#.............#...#...##........................................#........##.............##.....#..#.........
.......##......##.............##..................#.#........................#..#.....#............#.....##.#............#..#..#...
............#...#...............................#......#.#...................#...#.#..............#.........#..........#.#......#..
...........#.........#......#............#.....................................#....#.......#.....#.......................#.....#..
.................#.##.....................#.............#.#..............................................................#.........
.........#.#..#...........#....#.....#....#...............##.........................#....#.....#.......#..................###..#..
..................................................................................................................................."""

# s = """...........
# .....###.#.
# .###.##..#.
# ..#.#...#..
# ....#.#....
# .##..S####.
# .##..#...#.
# .......##..
# .##.#.####.
# .##..##.##.
# ..........."""


from collections import Counter
r = set()

g = s.split("\n")
M = len(g)
N = len(g[0])
x,y=0,0
for i in range(M):
    for j in range(N):
        if g[i][j] == "S":
            r.add((i,j))

ns = []
total_t = 0
for t in [65, 262, 262]:
    total_t += t
    for i in range(t):
        if i %1000 == 0:
            print(i)
        rnew = set()
        for (x,y) in r:
            for j in range(4):
                dx = [1,0,-1,0][j]
                dy = [0,1,0,-1][j]
                nx,ny = x+dx,y+dy
                # print(g[])
                # if 0<=nx<M and 0<=ny<N and g[nx][ny]!="#" and (nx,ny) not in rnew:
                if g[nx%M][ny%N]!="#" and (nx,ny) not in rnew:
                    rnew.add((nx,ny))
        r = rnew
    print(len(r))
    ns.append((total_t, len(r)))

import numpy as np

ls = [l for l,r in ns]
rs = [r for l,r in ns]
#polynomial fit with degree = 2
model = np.poly1d(np.polyfit([l for l,r in ns], [r for l,r in ns], 2))

from matplotlib import pyplot as plt
#add fitted polynomial line to scatterplot
polyline = np.linspace(1, 1000, 50)
plt.scatter(ls, rs)
plt.plot(polyline, model(polyline))
plt.show()

print(model(26501365)) # didn't work, ended up using wolfram alpha

# well, I thought about using fitting for a second, but then thought it's not possible...
# ended up reading solution from reddit.

